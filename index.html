<!DOCTYPE html>
<html>
  <head>
    <title>Reproducible research</title>
    <meta charset="utf-8">
      <link rel="stylesheet" type="text/css" href="./img/slides.css">
      <link rel="stylesheet" href="./img/font-awesome-4.7.0/css/font-awesome.min.css">
      <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
    .section_background {background-color:#c2c444; color: #fff}
    .subsection_background {background-color:#e87837; color: #fff}
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Reproducible research
### from data collection to publication
        
https://github.com/stijnvanhoey/workshop_ywp17

YWP workshop, 6 July 2017

Stijn Van Hoey

<a href="https://twitter.com/svanhoey"><i class="fa fa-twitter" aria-hidden="true"></i> @SVanHoey</a>
<a href="https://github.com/stijnvanhoey"><i class="fa fa-github" aria-hidden="true"></i> stijnvanhoey</a>


---
class: center, middle
        
## Sign up to https://github.com/

![:scale 100%](./img/sign_up_github.png)

---
class: center, middle
        
## Check if Github Desktop is installed...
https://desktop.github.com/

![:scale 100%](./img/install_github_desktop.png)

---
class: center, middle

<div class="alert alert-info">
    <a href="https://hackmd.io/s/S1S8J0OE-" target="_blank">https://hackmd.io/s/S1S8J0OE-</a>
</div>

![:scale 100%](./img/InnoScholComm_figure_jan2015.png)
        
---
class: center, middle, section_background

# Introduction

---
class: left, middle

## Previously [@Biomath](http://www.biomath.ugent.be/)...
<br>

.center[
![:scale 80%](./img/biomath_intro.png)]

---
class: left, middle

## Currently [@INBO](https://www.inbo.be/), [Lifewatch project](https://lifewatch.inbo.be)
<br>

.center[
![:scale 80%](./img/lifewatch_1.png)]

---
class: center, middle

![:scale 80%](./img/lifewatch_2.png)
https://www.inbo.be/en/open-data-policy

---
class: center, middle

<iframe src="https://demo.gbif.org/dataset/83e20573-f7dd-4852-9159-21566e1e691e" height="600px" width="800px"></iframe>

---
class: center, middle

![:scale 80%](./img/lifewatch_3.png)
https://github.com/inbo

---
class: center, middle

## Trying to do things 
## `reproducible` and `open`
### data, code, analysis, publications,...

---
class: center, middle

# but let's be honest...

![:scale 80%](./img/postit.jpg)

---

# I've been...

--
count: false

* ...creating files with names like `analysis_final_bis2.xslx`, `analysis_final_FINAL_bis2.xslx`,...

--
count: false

* ...sending mails to myself with `latest version` of data/scripts

--
count: false

* ...lost a couple of days work due to a bad `backup`-strategy, nevertheless my *dropbox, google drive, USB and HDD strategic combination*

--
count: false

* ...running > 10 different modelling/experimental scenario's by `changing parameters/inputs manually`

--
count: false

* ...commenting out sections in my `scripts` to run individual scenario's

--
count: false

* ...manually `copy-pasting` data from different spreadsheets into a single one

--
count: false

* ...`unable to understand my own` work/code/analysis

---
background-image: url(./img/philosoraptor-there-must-be-a-better-way.jpg)
        
---
class: center, middle, section_background

# Reproducibility

---
class: center, middle
background-image: url(./img/selfish_reproduce.png)        

.footnote[Markowetz Genome Biology (2015) 16:274 <br> DOI 10.1186/s13059-015-0850-7]

---
class: center, middle
background-image: url(./img/selfish_reproduce_alpha.png)
        
<div class="alert alert-success">
    <h2>Do it for your future self, a couple of days/weeks/months from now...</h2>
</div>
        
---
class: center, middle
background-image: url(./img/InnoScholComm_figure_jan2015.png)

---
class: center, middle
count: false
background-image: url(./img/InnoScholComm_figure_jan2015.png)
        
<div class="alert alert-warning">
    <h2>Tools, tools, tools...</h2>
</div>
        
---
class: center, middle
background-image: url(./img/best_practices_computational_science.png)

<div class="alert alert-success">
    <h2>best practices >>> tools</h2>
</div>
        
.footnote[Wilson G, Aruliah DA, Brown CT, Chue Hong NP, Davis M, et al. (2014) <br>Best Practices for Scientific Computing. PLoS Biol 12(1): e1001745. doi:10.1371/journal.pbio.1001745]

--
count: false

<div class="alert alert-success">
    Yes, I do have favorite tooling... of course!
</div>

---
class: center, middle
background-image: url(./img/good_enough_practices_computational_science.png)

.footnote[Bryan, J., Cranston, K., Kitzes, J., Nederbragt, L., Teal, T., Wilson, G. (2016). <br> Good Enough Practices for Scientific Computing, 1â€“30.]

---
class: left, middle

<h3>1. Tidy your data</h3>
<h3>2. Track your changes</h3>
<h3>3. Organize your project</h3>
        
---
class: center, middle, subsection_background
        
# Tidy your data
        
---
class: left, middle
.emphasize[Data `organization` is the foundation<br> of your research project]
        
---
class: center, middle
background-image: url(./img/tidy-data_paper.png)
        
.footnote[Hadley Wickham, Tidy Data, Vol. 59, Issue 10, Sep 2014,<br> Journal of Statistical Software. doi:10.18637/jss.v059.i10]

---
class: center, middle

## un-tidy
        
| WWTP | Treatment A | Treatment B |
|:------|-------------|-------------|
| Destelbergen | 8.  | 6.3 |
| Landegem | 7.5  | 5.2 |
| Dendermonde | 8.3  | 6.2 |
| Eeklo | 6.5  | 7.2 |

--

## tidy

| WWTP | Treatment | pH |
|:------|:-------------:|:-------------:|
| Destelbergen | A  | 8. |
| Landegem | A  | 7.5 |
| Dendermonde | A  | 8.3 |
| Eeklo | A  | 6.5 |
| Destelbergen | B  | 6.3 |
| Landegem | B  | 5.2 |
| Dendermonde | B  | 6.2 |
| Eeklo | B  | 7.2 |

---
class: left, middle
count: false

.center[## tidy]
<br>
    
<div class="alert alert-success">
    <ul>
      <li>Each <code>variable</code> forms a <b>column</b> and contains <code>values</code></li>
      <li>Each <code>observation</code> forms a <b>row</b></li>
        <li>Each type of <code>observational unit</code> forms a <b>table</b>.</li>
    </ul>
</div>

<br>

| WWTP | Treatment | pH |
|:------|:-------------:|:-------------:|
| Destelbergen | A  | 8. |
| Landegem | A  | 7.5 |
| Dendermonde | A  | 8.3 |
| Eeklo | A  | 6.5 |
| Destelbergen | B  | 6.3 |
| Landegem | B  | 5.2 |
| Dendermonde | B  | 6.2 |
| Eeklo | B  | 7.2 |

---
class: center, middle
background-image: url(./img/spreadsheet_example.png)


---
class: center, middle
background-image: url(./img/spreadsheet_example.png)
count: false

<div class="alert alert-info">
    <h2>You need to do a study over the different study plots and field seasons...</h2>
</div>
    
---
class: center, middle

Get the data here:<br> https://ndownloader.figshare.com/files/2252083

<br><br>
<div class="alert alert-info">
With the person next to you, identify what is <code>wrong</code> with this spreadsheet. Also discuss the steps you would need to take to clean up the 2013 and 2014 tabs, and to put them all together in one spreadsheet as a tidy data set.
</div>

<a href="http://www.datacarpentry.org/spreadsheet-ecology-lesson/02-common-mistakes/" target="_blank">Check this page</a> when you need inspiration...

---
class: left, middle

.emphasize.center[Working with spreadsheets...]
<div class="alert alert-warning">
<h3>Remember: </h3>
    <ul>
        <li>NEVER modify your <b>raw</b> data!</li>
        <li><b>Keep track</b> of all of the steps you take to clean your data</li>
        <li>Organize your data according to <b>tidy data</b> principles</li>
        <li>Save your data as an <a href="http://www.datacarpentry.org/spreadsheet-ecology-lesson/05-exporting-data/" target="_blank">open and static format</a> such as <code>csv</code></li>
    </ul>
</div>

---
class: left, middle

.emphasize.center[Scripting your data cleaning...]
<br>

.center[
![:scale 10%](http://blog.jupyter.org/content/images/2015/02/jupyter-sq-text.png)

<a href="https://github.com/jorisvandenbossche/DS-python-data-analysis/blob/master/_solved/case2_biodiversity_cleaning.ipynb" target="_blank">Programming example</a>
]

---
class: left, middle

.emphasize.center[Scripting your data cleaning...]
<div class="alert alert-warning">
<h3>Remember: </h3>
    <ul>
        <li><strike>NEVER modify</strike>Do <b>not overwrite</b> your <b>raw</b> data!</li>
        <li><strike><b>Keep track</b> of</strike> <b>Document</b> all of the steps you take to clean your data</li>
        <li>Organize your data according to <b>tidy data</b> principles</li>
        <li>Save your data as an <a href="http://www.datacarpentry.org/spreadsheet-ecology-lesson/05-exporting-data/" target="_blank">open and static format</a> such as <code>csv</code></li>
    </ul>
</div>

---
class: center, middle

.emphasize.center[Scripting **with** tidy data]
<br>

![:scale 10%](http://blog.jupyter.org/content/images/2015/02/jupyter-sq-text.png)

<a href="./src/tidy_introduction_example.ipynb" target="_blank">Scripting with tidy data showcase</a>

---
class: center, middle



---
class: center, middle

# Literate programming?!?

![:scale 30%](http://blog.jupyter.org/content/images/2015/02/jupyter-sq-text.png)
![:scale 30%](http://3.bp.blogspot.com/-z3gtVOQ8sr4/UOwWB7hlA_I/AAAAAAAAAQE/0a5_c4oKvN4/s1600/RStudio_markdown.png)

.emphasize.left[
<i class="fa fa-quote-left fa-5x fa-pull-left" aria-hidden="true"></i>... in literate programming the emphasis<br> is
reversed. Instead of writing code containing documentation,<br> the literate programmer writes<br> `documentation containing code`.
]
<br>
check 
<a href="https://github.com/jupyter/jupyter/wiki/A-gallery-of-interesting-Jupyter-Notebooks" target="_blank">this</a> and <a href="http://rmarkdown.rstudio.com/gallery.html" target="_blank">this</a> out!

---

Should I learn to make scripts?

Short answer: YES!

- learn w
        
---


-> showcases coding
    -> loop over files to do 'something' with data (requires function)
    -> timeseries based analysis
    -> spread-diagram as a model-example of reusable function
    -> EX: change the names names of a set of files
-> structuur


---


---
class: center, middle, subsection_background
        
# Track your changes

---
class: center, middle
count: false
        
<i class="fa fa-git fa-5x" aria-hidden="true"></i>
        
---
class: left, middle

.emphasize[
<i class="fa fa-quote-left fa-3x fa-pull-left" aria-hidden="true"></i>`Git` is an application that runs on your computer, like a web browser or a word processor
]

---
class: left, middle

# 1. `Git` lets you tell<br> the story of your<br> project

---
class: center, middle
background-image: url(./img/phd_comics_notfinal.gif)     

.footnote[Piled Higher and Deeper by Jorge Cham, <br> www.phdcomics.com]

---
class: center, middle

![:scale 60%](./img/commit_file_chain.png)

---
class: left, middle

.emphasize[You use Git to take snapshots of all<br> the files in a folder. This folder <br> is called a `repository` or `repo`.]

---
class: left, middle

.emphasize[When you want to take a snapshot <br> of a file or files, you create a<br> `commit`]

---
class: center, middle
        
![:scale 100%](./img/commit_chain_0commit.png)

---
class: center, middle
count: false

![:scale 100%](./img/commit_chain_1commit.png)

---
class: center, middle
count: false

![:scale 100%](./img/commit_chain_2commit.png)

---
class: center, middle
count: false

![:scale 100%](./img/commit_chain_3commit.png)

---
class: center, middle
count: false

![:scale 100%](./img/commit_chain_4commit.png)        

---
class: center, middle
count: false

![:scale 100%](./img/commit_chain_5commit.png)         

---
class: left, middle

.emphasize[When you `commit` a file or files,<br> some information is saved along<br> with the changes of the file]

---
class: left, middle

.emphasize[
* WHO
* WHEN
]

---
class: left, middle

.emphasize[You can add more information about the changes youâ€™ve made in a `commit message`]

---

# A good commit message
<br><br><br><br>

.widthlimit[
```
Extend season handling

Dependent of the use-case, the meteorological or astrological 
handling of season start and end dates is required. This 
commit provides support for both use cases as class property
```
]

---
class: center, middle
background-image: url(./img/commit_1.png)

---
class: center, middle
background-image: url(./img/commit_2.png)
count: false

---
class: center, middle
background-image: url(./img/commit_3.png)
count: false

---
class: left, bottom
background-image: url(./img/commit_history.png)
        
.emphasize[Once you saved some snapshots,<br>Git lets you move through them...]

---
class: left, middle

# 2. `Git` helps you back<br> up your work

---
class: center, middle

![:scale 100%](./img/current_backup.png)

---
class: left, middle

.emphasize[Everyone knows that you should<br> `back up` your work regularly]

---
class: left, middle

.emphasize[Ideally to somewhere that is<br> `geographically distinct`<br> from your computer]

---
class: left, middle

.emphasize[
* Safer
* Access from different places
* Shared access

<br>
<i class="fa fa-server fa-3x" aria-hidden="true"></i>
<i class="fa fa-dropbox fa-3x" aria-hidden="true"></i>
<i class="fa fa-cloud-upload fa-3x" aria-hidden="true"></i>
...
]

---
class: left, middle

.emphasize[In Git this place is called a `remote`]

---
class: left, middle

.center.emphasize[<i class="fa fa-github fa-5x" aria-hidden="true"></i><br>A very popular remote is `GitHub`]

---
class: left, middle

.emphasize[To get some work from a remote<br> for the first time you `clone` it]

---
class: left, middle
background-image: url(./img/git_remote_1.png)

---
class: left, middle
background-image: url(./img/git_remote_2.png)  
count: false

---
class: right, middle
background-image: url(./img/git_remote_3.png)  
count: false

.emphasize[The repo is<br> available locally<br> and on<br> calculation<br> server]

---
class: right, middle
background-image: url(./img/git_remote_4.png)  
count: false

.emphasize[I created<br> code locally]

---
class: right, middle
background-image: url(./img/git_remote_5.png)  
count: false

.emphasize[I can `push`<br> my changes<br> to remote]

---
class: right, middle
background-image: url(./img/git_remote_5b.png)  
count: false

.emphasize[The code on the<br> cluster does not<br> contain the<br> new feature]

---
class: right, middle
background-image: url(./img/git_remote_6.png)       
count: false

<br><br><br><br>
.emphasize[I can `pull`<br> my changes to<br> the calculation<br> cluster]


---
class: left, middle

`repository`<br>
.fadetext[`add`]<br>
`commit`<br>
.fadetext[`hash`]<br>
.fadetext[`checkout`]<br>
.fadetext[`branch`]<br>
.fadetext[`merge`]<br>
`remote`<br>
`clone`<br>
`pull`<br>
`push`<br>

---
class: center, middle

# Your turn...

![](./img/youcandoit.gif)

.left[
* configure Git(Hub)
* create you're first repo
* clone locally
* commit, push and pull...
]

---
class: left, middle

.emphasize[Git is great with `text` files]<br>
*(.R, .py, .md, .tex,...)*

--

<br><br>
.emphasize[Git is not suitable for...

* Large files (100s of MBs - GBs)
* Binary files]
*(Pictures, Videos, Music, Office Documents, output binaries)*

<br><br>
.emphasize[...for the moment, remember `.gitignore`]
   
---
class: right, top
background-image: url(./img/git_intro.png) 
        
## Version control...

.emphasize[
Tell the story of your project <i class="fa fa-git" aria-hidden="true"></i><br>
Travel back in time <i class="fa fa-git" aria-hidden="true"></i><br>
Experiment with changes <i class="fa fa-git" aria-hidden="true"></i><br>
Backup your work <i class="fa fa-git" aria-hidden="true"></i> <i class="fa fa-github" aria-hidden="true"></i><br>
Collaborate on projects <i class="fa fa-git" aria-hidden="true"></i> <i class="fa fa-github" aria-hidden="true"></i>]
        
---
class: right, top
background-image: url(./img/git_intro.png) 
        
## Version control...

.emphasize[
**Tell the story of your project** <i class="fa fa-git" aria-hidden="true"></i><br>
Travel back in time <i class="fa fa-git" aria-hidden="true"></i><br>
Experiment with changes <i class="fa fa-git" aria-hidden="true"></i><br>
**Backup your work** <i class="fa fa-git" aria-hidden="true"></i> <i class="fa fa-github" aria-hidden="true"></i><br>
Collaborate on projects <i class="fa fa-git" aria-hidden="true"></i> <i class="fa fa-github" aria-hidden="true"></i>]

---

# Manual versioning?

.footnote[Bryan, J., Cranston, K., Kitzes, J., Nederbragt, L., Teal, T., Wilson, G. (2016). <br> Good Enough Practices for Scientific Computing, 1â€“30.]

--
count: false
   
* Mirror project folder off the researcherâ€™s working machine by a remote system (e.g. Dropbox), `synchronize` daily

--
count: false

* Add a file called `CHANGELOG.txt` to the project folder
        
```
## 2017-05-08
        
* Add support for both meteorological or astrological handling of season start and end dates
* Adapt plot date label handling
        
## 2017-04-22

* Moved horizon plot function to separate file
```

--
count: false

* `Copy the entire project` whenever a significant change has been made -> *Data is Cheap, Time is Expensive!*




---
class: center, middle, subsection_background
        
# Organize your project

        



---
class: center, middle, section_background

# Open science?!?   
        
---
class: center, middle
background-image: url(./img/open_science_taxonomy.png)

---
class: center, middle        
background-image: url(./img/open_science_just_science.png)

<div>
    <code>Open science describes the practice of carrying out scientific research in a completely transparent manner, and making the results of that research available to everyone. Isnâ€™t that just `science`?</code>
</div>

---
class: left, middle

![:scale 100%](./img/workflow_example_1.png)

        
---
For (your last) paper/conference paper/phd/... sketch the flow of data you're working with (which data, where and how stored, software used for manipulation)

---
MY ADVICE:
        
* learn to write scripts (Python/R/...)
    * use a supportive coding environment (IDE), e.g. Rstudio (R), Spyder (Python)
    * remember TAB and ?

* use version control (git)
    * With Github Desktop, Rstudio, cmd,... 

* be hard to yourself: 
    * project file structure 
    * tidy data organisation

---

INFO
    * PROVIDE DS course on Python!!
    * http://www.datacarpentry.org/python-ecology-lesson/




</textarea>
<!--* <a href="./python_intro.html">Introduction to (scientific) Python</a> ->
<!--    <script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
        </script>-->
    <script src="./img/remark.min.js" type="text/javascript">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
    <script>
        remark.macros.scale = function (percentage) {
          var url = this;
          return '<img src="' + url + '" style="width: ' + percentage + '" />';
      };
      var slideshow = remark.create();
    </script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>
